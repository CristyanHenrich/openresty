worker_processes  1;
error_log /dev/stderr warn;

events {
    worker_connections 1024;
}

env JWT_SECRET;

http {
    lua_package_path "/usr/local/openresty/lualib/?.lua;;";

    server {
        listen 8082;

        set $ip '';
        set $socket '';
        set $api '';

        server_name api.playground.dev.br;

        location / {
            access_by_lua_file /bearer.lua;
            
            default_type text/plain;
            content_by_lua_block {
                ngx.print("IP: ", ngx.var.ip, "\n")
                ngx.print("Socket: ", ngx.var.socket, "\n")
                ngx.print("API: ", ngx.var.api, "\n")
            }
        }
    }
}
